import pandas as pd 
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
import time
driver = webdriver.Chrome()
driver.maximize_window()
url="""https://meghdadit.com/productlist/mobile/?b=82"""
driver.get(url) 
links = []
i = 1
while i<=3:
    
    product = driver.find_elements(By.CLASS_NAME, """mh-100""")
    next_btn = driver.find_element(By.CSS_SELECTOR, """#SharedMessage_ContentPlaceHolder1_hlkNextPage > i""")
    for p in product:
        links.append(p.get_attribute('href'))
    driver.implicitly_wait(10)
    next_btn.click()
    i+=1 
df = pd.DataFrame(columns=['model', 'price', 'ram','storage'])
try:
    for l in links:
        driver.get(l)
    
        model = driver.find_element(By.CSS_SELECTOR, """#siteWidth > div > div.product-summary-wrapper > div > div.col-12.col-xl-5.summary-right-column > div > div.d-xl-none.text-right.p-3.mt-2.title-wrapper > h1""")
        price = driver.find_element(By.CSS_SELECTOR, """#SharedMessage_ContentPlaceHolder1_divPrice > div.price-value-wrapper.price-wrapper > div""")
        ram = driver.find_element(By.CSS_SELECTOR, """#specs > article > section:nth-child(4) > ul > li:nth-child(1) > div.attribute-value""")
        storage=driver.find_element(By.CSS_SELECTOR, """#specs > article > section:nth-child(4) > ul > li:nth-child(2) > div.attribute-value""") 
    
        data = {'model':model.text, 'price':price.text, 'ram':ram.text, 'storage':storage.text}
        print(data)
        
        df = df.append(data, ignore_index=True)
except Exception as e:
    print(e, driver.current_url)
